本软件的主要使用流程是首先进入足部监测界面，与传感器采集设备建立连接，同时新建档案记录受试者的基本信息，之后进行运动监测数据采集，数据采集的过程中，实时观察传感器的采集结果，最后在档案管理界面进行步态分析、指标计算与运动能力评估。此外，档案管理界面也支持管理员和医生对档案数据库进行增删查改；校准界面支持管理员对传感器采集设备进行管理和校准。

# 1.	足部监测界面（主页）操作流程
打开软件后，首先进入主页，即足部监测界面，该界面集成了完成一次步态监测实验的必要功能。

 ![image](https://github.com/user-attachments/assets/7b175097-7691-4729-96e1-797f684d823e)

功能区 |	功能
----|----
设备管理区（左上）|	 与设备进行连接，显示设备连接过程中的信息，对设备进行管理，执行监测操作等。
信息记录区（左下）|	记录受试者的姓名、年龄、性别、身高、体重和其他基本信息，记录此次实验的对应实验类型，将受试者的信息建立档案，存入数据库。
数据显示区（中部）|	实时显示左、右脚的压力曲线数据、加速度曲线数据、角速度曲线数据、姿态角曲线数据。
数据显示区（右部）|	实时显示左、右脚的传感器分布以及对应的压力数据（圆形区域的颜色变化）、温度数据（柱状图）。

## 1.1 足部监测基本流程
足部监测的基本流程如下图所示。首先点击“Connect”按钮（“Connect”按钮在点击后将变为“Disconnect”按钮，再次点击“Disconnect”按钮将断开与传感器采集设备的连接）。待两个设备连接完成后，设备管理区的文字显示区域应显示两次“[ip: port]已连接”，表示已有两个设备与软件完成连接，并给出这两个设备对应的IP地址和端口。IP地址和端口也会显示在“Port”对应的下拉选项框中。确定完成设备连接后，才可以进行下一步操作。

完成设备连接后，需要为软件手动辨别不同的设备对应的安装位置，即设定该设备安装在左脚或右脚。首先，在“Port”对应的下拉选项框中选中左脚上的传感器采集设备的IP地址和端口，点击“Set As Left”将其设定为左脚上的传感器，设定完成后，在下方的表格中，“Left”一栏将会显示左脚上的传感器的IP地址和端口；随后，在“Port”对应的下拉选项框中选中右脚上的传感器采集设备的IP地址和端口，点击“Set As Right”将其设定为右脚上的传感器，对应的信息同样会显示在下方的表格中。确定完成设备的左右分配设定后，可以为受试者建立档案并进行步态监测。

建立受试者档案时，先在对应的区域填写受试者的姓名、年龄、性别、身高、体重和其他基本信息，然后点击“新增档案”按钮，将受试者的档案记录进数据库中。“csvPath”一栏将自动生成此次记录的数据存储目录。

受试者的档案要求必须填写姓名，其他信息则可以为空。在填写了姓名之后，才允许进行步态监测和数据采集。点击“Record”按钮进行步态监测，右侧将显示此次监测的时长，同时“Record”按钮将变为“Stop”按钮。再一次点击“Stop”按钮，将停止此次监测，将数据采集结果写入csv文件中，保存至对应的数据存储目录下。
 
![image](https://github.com/user-attachments/assets/6519fa42-c584-4329-97d1-713eaf5c7cc3)

## 1.2 压力传感器标定流程
本软件同样支持压力传感器标定。压力传感器标定是指，利用受试者的体重，以最小二乘法的方式，对采集设备中的薄膜压力传感器的输出进行校准。要进入压力传感器标定流程，要求在进行足部监测基本流程时，填写受试者的姓名和体重（千克），在点击“Record”按钮开始数据采集后，再点击“FSR标定”按钮，进入压力传感器标定界面（图 5）。

压力传感器标定界面有双足站立、左足站立和右足站立三个标定项目。右上角可以设置标定项目时长，默认为2秒。依次点击标定项目对应的按钮开始标定，并要求受试者进行对应的操作，具体流程如下：

1)	双足站立：要求受试者放松身体，自然静立。在受试者姿态稳定后，点击“双足站立”按钮，直到按钮右侧显示标定项目结果；
2)	左足站立：要求受试者放松身体，提起右足，左足单足站立。在受试者姿态稳定后，点击“左足站立”按钮，直到按钮右侧显示标定项目结果；
3)	右足站立：要求受试者放松身体，提起左足，右足单足站立。在受试者姿态稳定后，点击“左足站立”按钮，直到按钮右侧显示标定项目结果；

![image](https://github.com/user-attachments/assets/c04fb01d-54e7-481c-bbbc-86f140d8dec9)

完成三项标定项目后，点击“计算结果”按钮，等待右侧显示计算后的标定结果，点击“应用”按钮，应用此次的标定结果。

完成标定的所有流程后，关闭此窗口，点击主页的“Stop”按钮，停止数据采集。
 
其他按钮：点击“调整档案”将跳转至“档案”页进行档案管理，点击“Calibration”按钮将跳转至“校准”页进行传感器校准。

## 1.3 数据显示区操作流程
主页的中部和右部为数据显示区域，如图所示。中部数据显示区域从上到下依次实时显示压力曲线数据、加速度曲线数据、角速度曲线数据、姿态角曲线数据。通过切换“Left”和“Right”标签可以切换当前显示的曲线数据为左脚或右脚的传感器数据。

右部数据显示区域的主体为传感器的分布示意图，圆形区域表示薄膜压力传感器，矩形区域则表示薄膜温度传感器，不同的传感器在图上依次编号。根据接收到的压力数据，对应的圆形区域将产生对应的颜色变化，实时显示足底的压力分布数据。同时，点击对应的圆形区域，可以控制中部显示区域的显示内容，即显示该传感器的曲线数据与否。

右部数据显示区域的下方则是温度数据的柱状图，实时显示每个脚对应的4个薄膜温度传感器的温度数据变化。
 
![image](https://github.com/user-attachments/assets/e89638d5-622a-4650-8939-6ab422d84da8)

# 2.	数据管理界面操作流程
点击切换“档案”选项，进入数据管理界面，界面如图7所示。数据管理界面分为两块主要功能区。
 
![image](https://github.com/user-attachments/assets/c6d2426c-4ed6-43b9-adb3-1a426f1eb8e0)

功能区	| 功能
---- | ----
档案管理区|管理受试者个人信息的相关数据，对数据库进行增删查改等操作。
数据管理区|管理此软件所记录的所有实验数据，并对实验数据进行检查、计算、分析、评估等操作。

## 2.1 档案管理区操作说明
档案管理区显示当前数据库所记录的所有受试者个人信息，包括编号（“id”）、姓名（“name”）、建档日期（“date”）、年龄（“age”）、身高（“height”）、体重（“weight”）、其他信息（“information”）、数据保存路径（“csv_path”）、性别（“gender”）和实验日期（“trailDate”）。其中大部分信息在主页的信息记录区（图3）得到记录，编号则通过递增的方式自动编号，建档日期和实验日期也由软件自动记录。档案管理区域支持增删查改和检索更新数据库的功能。

增：要在此界面新增一条档案，可以点击“Add”按钮，新增一行数据，并填写其中的内容。其中，“name”一列为必填选项。新增的列在最左侧显示为“*”，如图 8 数据库增删示意图所示。在填写完成后，点击“Confirm”按钮，提交此次修改，或点击“Cancel”按钮，取消此次修改，还原档案数据库。

删：选中需要删除的行，点击“Delete”按钮，将该行标记为待删除。待删除的列在最左侧显示为“！”。在填写完成后，点击“Confirm”按钮，提交此次修改，或点击“Cancel”按钮，取消此次修改，还原档案数据库。

查：在上方的“日期”栏和“姓名”栏填写对应的信息，点击“Find”按钮，软件将匹配到对应的档案数据并显示。如日期和姓名均为空，则更新一次档案显示区，显示数据库当前的所有数据。

改：双击需要修改的单元格，输入对应的修改。在修改完成后，点击“Confirm”按钮，提交此次修改，或点击“Cancel”按钮，取消此次修改，还原档案数据库。

更新：点击“Update”按钮，系统将检索存放在指定文件夹下的所有实验记录数据，并将这些实验记录对应的受试者基本信息与数据库中存储的所有信息进行比较，如数据库中缺失此受试者的信息，则将其添加入数据库中。
 
![image](https://github.com/user-attachments/assets/c421ccb7-7f77-43cd-9ac2-659011d68d5e)

## 2.2 数据管理区操作说明
数据管理区可以对本软件所记录的所有实验记录进行管理。其操作流程如图所示。首先选择对应实验记录的日期、受试者姓名和实验名称，点击“Find Records”按钮，检测该次实验的数据和结果是否完整。“left.csv”和“right.csv”分别表示左脚的实验数据和右脚的实验数据，“result”则表示该次实验的计算结果。如果该次实验的数据记录完整或已存在计算结果，则对应方框会被勾选。同样的，框选栏下方的“Detail”一行会显示“左右足记录已查询到”。如果数据缺失，此行也会显示相关信息。

![image](https://github.com/user-attachments/assets/39729f73-c501-4af0-b5d8-f3a81346e93a)

确保左右足记录均查询到的前提下，可以进行步态参数的计算。点击“Calculate”按钮，在下方左侧文本框中，会显示“计算中”。计算结束后，显示“计算完成”。

计算完成后，可以点击“Show Result”按钮，数据管理区下方的左右两个文本框会各自显示足部的运动参数和压力参数，如图所示。

![image](https://github.com/user-attachments/assets/0fc1155a-8749-485c-9d29-943da02068eb)

计算完成后，可以点击“Report”按钮，软件将调用默认的PDF浏览器，打开此次实验所生成的评估报告，如图所示。

 ![image](https://github.com/user-attachments/assets/29948456-be22-47e7-a066-f0c74bb02c97)

# 3.	设备校准界面操作流程
设备校准界面是供设备管理人员所使用的，实现对传感器采集设备进行各项参数校正功能的界面，如图12所示。界面右侧是所提供的各项校准功能，左侧的图表则用于显示校准时所需参考的各项指标，包括磁场数据“magXZ”，“magYZ”，“magYZ”，和加速度计数据“Acc”，陀螺仪数据“Gyro”和欧拉角数据“Euler”。在界面右下角，为各项校准功能的使用方法提供了简要说明：

使用前，确保已单独连接到需要校准的设备，然后在主页点击“Calibration”按钮，进入设备校准界面后再点击“Start Record”按钮开启设备通信。此时各项数据将显示在左侧图表中，包括磁力图（左列三图为XZ YZ XY），加速度图（中列上图），角速度图（中列中图）和欧拉角图（中列下图）。

Mag Cali Start: 启动磁力校准，在弱磁环境下，使设备绕各个轴旋转，观察磁力图中的轨迹点是否足以形成一个大椭圆，随后点击Mag Cali Stop结束校准，点击Cali Result Save将校准结果写入IMU。

Acc Cali: 平放并静止IMU，此选项将使XY轴的加速度归零，Z轴加速度为g。

Gyro Auto Cali: 若开启此功能（默认开启），角速度计将自动处理微小的漂移和抖动。

FSR参数调整：功能与主页所提供的FSR标定功能类似，但是不需要进行标定，而是手动调整参数。

![image](https://github.com/user-attachments/assets/9670f3e7-be42-44db-ba5d-1a99c4680611)
